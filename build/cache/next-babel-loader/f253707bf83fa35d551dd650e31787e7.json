{"ast":null,"code":"import _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _Array$isArray from \"@babel/runtime-corejs2/core-js/array/is-array\";\nvar __jsx = React.createElement;\nimport React, { Fragment, useCallback } from 'react';\nimport { GA_ID, USING_GA } from '~/lib/constants';\nvar definedDataLayer = false;\nvar definedGtag = false;\nexport var gtag = function gtag() {\n  if (USING_GA) {\n    var _window;\n\n    if (definedDataLayer === false) {\n      definedDataLayer = true;\n\n      if (_Array$isArray(window['dataLayer']) === false) {\n        window['dataLayer'] = window['dataLayer'] || [];\n      }\n    }\n\n    if (definedGtag === false) {\n      definedGtag = true;\n\n      if (typeof window['gtag'] !== 'function') {\n        window['gtag'] = function () {\n          var _window$dataLayer;\n\n          (_window$dataLayer = window['dataLayer']).push.apply(_window$dataLayer, arguments);\n        };\n      }\n    }\n\n    (_window = window)['gtag'].apply(_window, arguments);\n  }\n};\nexport function trackPageView() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      title = _ref.title,\n      location = _ref.location,\n      path = _ref.path;\n\n  if (USING_GA) {\n    var _window2, _window2$document, _window3, _window3$location, _window4, _window4$location, _gtag;\n\n    gtag('config', GA_ID, (_gtag = {}, _defineProperty(_gtag, 'page_title', title !== null && title !== void 0 ? title : (_window2 = window) === null || _window2 === void 0 ? void 0 : (_window2$document = _window2.document) === null || _window2$document === void 0 ? void 0 : _window2$document.title), _defineProperty(_gtag, 'page_location', location !== null && location !== void 0 ? location : (_window3 = window) === null || _window3 === void 0 ? void 0 : (_window3$location = _window3.location) === null || _window3$location === void 0 ? void 0 : _window3$location.href), _defineProperty(_gtag, 'page_path', path !== null && path !== void 0 ? path : (_window4 = window) === null || _window4 === void 0 ? void 0 : (_window4$location = _window4.location) === null || _window4$location === void 0 ? void 0 : _window4$location.pathname), _gtag));\n  }\n}\nexport var GoogleAnalytics = function GoogleAnalytics() {\n  var setGoogleTags = useCallback(function () {\n    return {\n      __html: \"\\n                window.dataLayer = window.dataLayer || [];\\n                function gtag(){dataLayer.push(arguments);}\\n                gtag('js', new Date());\\n                gtag('config', '\".concat(GA_ID, \"');\\n            \")\n    };\n  }, []);\n\n  if (USING_GA) {\n    return __jsx(Fragment, null, __jsx(\"script\", {\n      async: true,\n      src: \"https://www.googletagmanager.com/gtag/js?id=\".concat(GA_ID)\n    }), __jsx(\"script\", {\n      dangerouslySetInnerHTML: setGoogleTags()\n    }));\n  }\n\n  return null;\n};","map":{"version":3,"sources":["/Users/chad/_workspace/ladder-game/plugins/google-analytics.tsx"],"names":["React","Fragment","useCallback","GA_ID","USING_GA","definedDataLayer","definedGtag","gtag","window","push","trackPageView","title","location","path","document","href","pathname","GoogleAnalytics","setGoogleTags","__html"],"mappings":";;;AAAA,OAAOA,KAAP,IAAoBC,QAApB,EAA8BC,WAA9B,QAAiD,OAAjD;AACA,SAASC,KAAT,EAAgBC,QAAhB,QAAgC,iBAAhC;AAEA,IAAIC,gBAAgB,GAAG,KAAvB;AACA,IAAIC,WAAW,GAAG,KAAlB;AAEA,OAAO,IAAMC,IAAI,GAAG,SAAPA,IAAO,GAAa;AAC7B,MAAIH,QAAJ,EAAc;AAAA;;AACV,QAAIC,gBAAgB,KAAK,KAAzB,EAAgC;AAC5BA,MAAAA,gBAAgB,GAAG,IAAnB;;AACA,UAAI,eAAcG,MAAM,CAAC,WAAD,CAApB,MAAuC,KAA3C,EAAkD;AAC9CA,QAAAA,MAAM,CAAC,WAAD,CAAN,GAAsBA,MAAM,CAAC,WAAD,CAAN,IAAuB,EAA7C;AACH;AACJ;;AAED,QAAIF,WAAW,KAAK,KAApB,EAA2B;AACvBA,MAAAA,WAAW,GAAG,IAAd;;AACA,UAAI,OAAOE,MAAM,CAAC,MAAD,CAAb,KAA0B,UAA9B,EAA0C;AACtCA,QAAAA,MAAM,CAAC,MAAD,CAAN,GAAiB,YAAa;AAAA;;AAC1B,+BAAAA,MAAM,CAAC,WAAD,CAAN,EAAoBC,IAApB;AACH,SAFD;AAGH;AACJ;;AAED,eAAAD,MAAM,EAAC,MAAD,CAAN;AACH;AACJ,CApBM;AAsBP,OAAO,SAASE,aAAT,GAA6G;AAAA,iFAAJ,EAAI;AAAA,MAApFC,KAAoF,QAApFA,KAAoF;AAAA,MAA7EC,QAA6E,QAA7EA,QAA6E;AAAA,MAAnEC,IAAmE,QAAnEA,IAAmE;;AAChH,MAAIT,QAAJ,EAAc;AAAA;;AACVG,IAAAA,IAAI,CAAC,QAAD,EAAWJ,KAAX,sCACC,YADD,EACgBQ,KADhB,aACgBA,KADhB,cACgBA,KADhB,eACyBH,MADzB,kEACyB,SAAQM,QADjC,sDACyB,kBAAkBH,KAD3C,0BAEC,eAFD,EAEmBC,QAFnB,aAEmBA,QAFnB,cAEmBA,QAFnB,eAE+BJ,MAF/B,kEAE+B,SAAQI,QAFvC,sDAE+B,kBAAkBG,IAFjD,0BAGC,WAHD,EAGeF,IAHf,aAGeA,IAHf,cAGeA,IAHf,eAGuBL,MAHvB,kEAGuB,SAAQI,QAH/B,sDAGuB,kBAAkBI,QAHzC,UAAJ;AAKH;AACJ;AAED,OAAO,IAAMC,eAAmB,GAAG,SAAtBA,eAAsB,GAAM;AACrC,MAAMC,aAAa,GAAGhB,WAAW,CAAC,YAAM;AACpC,WAAO;AACHiB,MAAAA,MAAM,gNAIgBhB,KAJhB;AADH,KAAP;AAQH,GATgC,EAS9B,EAT8B,CAAjC;;AAWA,MAAIC,QAAJ,EAAc;AACV,WACI,MAAC,QAAD,QACI;AAAQ,MAAA,KAAK,MAAb;AAAc,MAAA,GAAG,wDAAiDD,KAAjD;AAAjB,MADJ,EAEI;AAAQ,MAAA,uBAAuB,EAAEe,aAAa;AAA9C,MAFJ,CADJ;AAMH;;AAED,SAAO,IAAP;AACH,CAtBM","sourcesContent":["import React, { FC, Fragment, useCallback } from 'react'\nimport { GA_ID, USING_GA } from '~/lib/constants'\n\nlet definedDataLayer = false\nlet definedGtag = false\n\nexport const gtag = (...args) => {\n    if (USING_GA) {\n        if (definedDataLayer === false) {\n            definedDataLayer = true\n            if (Array.isArray(window['dataLayer']) === false) {\n                window['dataLayer'] = window['dataLayer'] || []\n            }\n        }\n\n        if (definedGtag === false) {\n            definedGtag = true\n            if (typeof window['gtag'] !== 'function') {\n                window['gtag'] = (...args) => {\n                    window['dataLayer'].push(...args)\n                }\n            }\n        }\n\n        window['gtag'](...args)\n    }\n}\n\nexport function trackPageView({ title, location, path }: { title?: string; location?: string; path?: string } = {}) {\n    if (USING_GA) {\n        gtag('config', GA_ID, {\n            ['page_title']: title ?? window?.document?.title,\n            ['page_location']: location ?? window?.location?.href,\n            ['page_path']: path ?? window?.location?.pathname,\n        })\n    }\n}\n\nexport const GoogleAnalytics: FC = () => {\n    const setGoogleTags = useCallback(() => {\n        return {\n            __html: `\n                window.dataLayer = window.dataLayer || [];\n                function gtag(){dataLayer.push(arguments);}\n                gtag('js', new Date());\n                gtag('config', '${GA_ID}');\n            `,\n        }\n    }, [])\n\n    if (USING_GA) {\n        return (\n            <Fragment>\n                <script async src={`https://www.googletagmanager.com/gtag/js?id=${GA_ID}`}></script>\n                <script dangerouslySetInnerHTML={setGoogleTags()} />\n            </Fragment>\n        )\n    }\n\n    return null\n}\n"]},"metadata":{},"sourceType":"module"}