{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./layouts/DefaultLayout.tsx","webpack:///./reducers/index.type.ts","webpack:///./reducers/index.reducer.ts","webpack:///./reducers/index.action.ts","webpack:///./components/LadderGame.style.tsx","webpack:///./components/LadderGame.type.ts","webpack:///./components/LadderGame.reducer.tsx","webpack:///./components/LadderGame.action.tsx","webpack:///./lib/utils.ts","webpack:///./components/ResultCanvas.tsx","webpack:///./components/LadderGame.tsx","webpack:///./pages/index.tsx","webpack:///external \"@material-ui/core/styles\"","webpack:///external \"@material-ui/core/StepLabel\"","webpack:///external \"@material-ui/core/TextField\"","webpack:///external \"@material-ui/core\"","webpack:///external \"@material-ui/core/Step\"","webpack:///external \"@material-ui/core/Typography\"","webpack:///external \"@material-ui/core/Stepper\"","webpack:///external \"@material-ui/core/Button\"","webpack:///external \"@material-ui/core/Box\"","webpack:///external \"react\"","webpack:///external \"clsx\"","webpack:///external \"@material-ui/core/StepContent\"","webpack:///external \"@material-ui/core/Paper\"","webpack:///external \"next/head\""],"names":["useStyles","styles","makeStyles","theme","appBar","position","layout","width","marginLeft","spacing","marginRight","breakpoints","up","paper","marginTop","marginBottom","padding","stepper","buttons","display","justifyContent","button","Layout","children","title","classes","Date","getFullYear","CHANGE_REWARD","CHANGE_LADDER_QTY","CHANGE_NAME","RESET_ALL","initialState","ladderQty","players","rewards","state","action","type","types","index","rewardName","payload","splice","playerName","key","Array","isArray","length","Error","changeReward","changeLadderQty","changeName","resetAll","colors","root","minHeight","mapHeight","ladders","zIndex","overflowX","overflowY","ladderContainer","flexWrap","ladderItem","alignItems","flexDirection","minWidth","ladderItemHeader","textAlign","ladderItemFooter","ladderItemBlock","backgroundColor","height","borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius","ladderItemHandle","cursor","borderRadius","boxShadow","ladderMidLine","top","left","result","right","bottom","buttonItem","CREATE_MAP_DATA","UPDATE_MAP_SIZE","START_GENERATING_MIDLINE","CANCEL_GENERATING_MIDLINE","FINISH_GENERATING_MIDLINE","REMOVE_MIDLINE","PREPARE_GAME","PLAY_GAME","RE_GAME","RESET","defaultOption","mapMinHeight","LadderGameInitialState","hasMapData","mapData","mapWidth","ladderBlockCnt","midLineData","generatingMidLinePoint","gameStep","completedLineIndexs","LadderGameInitializer","__uid","LadderGameReducer","x","y","uid","el","isHandle","isLinked","prevBlock","nextBlock","linkedBlock","midLine","prev","Math","max","startPoint","endPoint","blocks","push","midLineIndex","forEach","row","sort","random","lineIndex","prevMidLineData","block","createMapData","updateMapSize","startGeneratingMidline","cancelGeneratingMidline","finishGeneratingMidline","removeMidline","prepareGame","playGame","reGame","reset","throttling","cb","distance","prevTime","timeout","nowTime","now","clearTimeout","window","setTimeout","ResultCanvas","props","canvasRef","useRef","mounted","setMount","useState","setState","coordinates","lineWidth","animations","useEffect","stopAnimation","drawCanvas","useCallback","isManual","calcCoordinates","makeAnimations","prevState","playAnimation","prevBlockUid","current","map","next","offsetLeft","offsetWidth","offsetTop","offsetHeight","canvas","ctx","getContext","color","lastIndex","waypointMapper","waypoint","isEnd","lineTo","stroke","lineCap","lineJoin","strokeStyle","fillStyle","reduce","currentCoordinate","prevCoordinate","clearRect","beginPath","arc","PI","closePath","fill","concat","calcWaypoints","start","end","waypoints","dx","dy","frames","round","sqrt","pow","abs","i","useAnimation","playAnimationState","playing","playIndex","Number","animationCallback","requestAnimationFrame","LadderGame","dispatch","useReducer","mapRef","methods","calcMapSize","actions","scrollWidth","scrollHeight","paintLadder","calcMidLineStyle","toTheSameTop","toTheBottom","toTheRight","leftPoint","rightPoint","defaultMidLineOption","style","transform","margin","addLine","angle","atan","undefined","connectMidLine","e","persist","console","group","log","groupEnd","cutMidLine","bindEl","data","includes","doReady","handleWindowResize","addEventListener","removeEventListener","xVal","xIndex","yVal","yIndex","clsx","active","linked","textField","actionsContainer","resetContainer","IndexPage","steps","activeStep","setActiveStep","store","IndexReducer","formRef","handleSubmit","preventDefault","handleNext","prevActiveStep","handleBack","handleReset","IndexAction","target","value","label","currentStep","isError","from"],"mappings":"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","file":"static/8_zLtNy5dfKsyFogUCZKw/pages/index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = require('../../../ssr-module-cache.js');\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tvar threw = true;\n \t\ttry {\n \t\t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n \t\t\tthrew = false;\n \t\t} finally {\n \t\t\tif(threw) delete installedModules[moduleId];\n \t\t}\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n","import React from 'react'\nimport Head from 'next/head'\nimport { AppBar, Toolbar, Typography, Paper, Link, CssBaseline } from '@material-ui/core'\nimport { makeStyles } from '@material-ui/core/styles'\n\nexport interface Props {\n    title?: string\n    width?: number\n}\n\nexport interface Styles {\n    width: number\n}\n\nconst useStyles = (styles: Styles) => makeStyles(theme => ({\n    appBar: {\n        position: 'relative',\n    },\n    layout: {\n        width: 'auto',\n        marginLeft: theme.spacing(2),\n        marginRight: theme.spacing(2),\n        [theme.breakpoints.up(styles.width + theme.spacing(2) * 2)]: {\n            width: styles.width,\n            marginLeft: 'auto',\n            marginRight: 'auto',\n        },\n    },\n    paper: {\n        marginTop: theme.spacing(3),\n        marginBottom: theme.spacing(3),\n        padding: theme.spacing(2),\n        [theme.breakpoints.up(styles.width + theme.spacing(3) * 2)]: {\n            marginTop: theme.spacing(6),\n            marginBottom: theme.spacing(6),\n            padding: theme.spacing(3),\n        },\n    },\n    stepper: {\n        padding: theme.spacing(3, 0, 5),\n    },\n    buttons: {\n        display: 'flex',\n        justifyContent: 'flex-end',\n    },\n    button: {\n        marginTop: theme.spacing(3),\n        marginLeft: theme.spacing(1),\n    },\n}))\n\nconst Layout: React.FC<Props> = ({ children, title = 'Ladder Game', width = 720 }) => {\n    const classes = useStyles({ width })()\n    return (\n        <React.Fragment>\n            <Head>\n                <title>{title}</title>\n                <meta charSet=\"utf-8\" />\n                <meta name=\"viewport\" content=\"initial-scale=1.0, width=device-width\" />\n                <meta httpEquiv=\"X-UA-Compatible\" content=\"ie=edge\"></meta>\n            </Head>\n\n            <CssBaseline />\n\n            <AppBar position=\"absolute\" color=\"default\" className={classes.appBar}>\n                <Toolbar>\n                    <Typography variant=\"h6\" color=\"inherit\" noWrap>\n                        {title}\n                    </Typography>\n                </Toolbar>\n            </AppBar>\n\n            <main className={classes.layout}>\n                <Paper className={classes.paper}>{children}</Paper>\n            </main>\n\n            <footer>\n                <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\n                    {'Copyright © '}\n                    <Link color=\"inherit\" href=\"https://github.com/divlook/\">\n                        divlook\n                    </Link>{' '}\n                    {new Date().getFullYear()}\n                    {'.'}\n                </Typography>\n            </footer>\n        </React.Fragment>\n    )\n}\n\nexport default Layout\n","export const CHANGE_REWARD = 'CHANGE_REWARD'\nexport const CHANGE_LADDER_QTY = 'CHANGE_LADDER_QTY'\nexport const CHANGE_NAME = 'CHANGE_NAME'\nexport const RESET_ALL = 'RESET_ALL'\n\nexport type ladderQty = number\nexport type playerName = string\nexport type rewardName = string\n\nexport interface InitialState {\n    ladderQty: ladderQty\n    players: any[]\n    rewards: string[]\n}\n\nexport interface Action {\n    type: string\n    payload?: any\n}\n","import * as types from '~/reducers/index.type'\n\nexport const initialState: types.InitialState = {\n    ladderQty: 0,\n    players: [],\n    rewards: [],\n}\n\nexport default (state: types.InitialState, action: types.Action) => {\n    switch (action.type) {\n        case types.CHANGE_REWARD: {\n            const { index, rewardName } = action.payload\n\n            state.rewards.splice(index, 1, rewardName)\n\n            return state\n        }\n\n        case types.CHANGE_LADDER_QTY: {\n            const { ladderQty } = action.payload\n            return {\n                ...state,\n                ladderQty,\n            }\n        }\n\n        case types.CHANGE_NAME: {\n            const { index, playerName } = action.payload\n\n            state.players.splice(index, 1, playerName)\n\n            return state\n        }\n\n        case types.RESET_ALL: {\n            for (const key in state) {\n                if (Array.isArray(state[key])) {\n                    state[key].splice(0, state[key].length)\n                } else {\n                    state[key] = initialState[key]\n                }\n            }\n\n            return state\n        }\n\n        default: {\n            throw new Error()\n        }\n    }\n}\n","import * as types from '~/reducers/index.type'\n\nexport const changeReward = (index: number, rewardName: types.rewardName) => {\n    return {\n        type: types.CHANGE_REWARD,\n        payload: {\n            index,\n            rewardName,\n        },\n    }\n}\n\nexport const changeLadderQty = (ladderQty: types.ladderQty) => {\n    return {\n        type: types.CHANGE_LADDER_QTY,\n        payload: {\n            ladderQty,\n        },\n    }\n}\n\nexport const changeName = (index: number, playerName: types.playerName) => {\n    return {\n        type: types.CHANGE_NAME,\n        payload: {\n            index,\n            playerName,\n        },\n    }\n}\n\nexport const resetAll = () => {\n    return {\n        type: types.RESET_ALL,\n        payload: {},\n    }\n}\n","import { makeStyles } from '@material-ui/core'\nimport { State } from './LadderGame.interface'\n\nexport const colors = ['#ff8990', '#f7a03e', '#fed853', '#38bb8e', '#139367', '#cef500', '#ffb700', '#ff008f', '#00b4c4', '#ff4040']\n\nexport const useStyles = (state: State) =>\n    makeStyles(theme => ({\n        root: {\n            width: '100%',\n            minHeight: state.mapHeight,\n            position: 'relative',\n        },\n        ladders: {\n            position: 'relative',\n            zIndex: 1,\n            width: '100%',\n            minHeight: state.mapHeight,\n            overflowX: 'auto',\n            overflowY: 'hidden',\n        },\n        ladderContainer: {\n            width: 'auto',\n            justifyContent: 'space-between',\n            flexWrap: 'nowrap',\n        },\n        ladderItem: {\n            display: 'flex',\n            alignItems: 'center',\n            flexDirection: 'column',\n            minWidth: 80,\n        },\n        ladderItemHeader: {\n            textAlign: 'center',\n            marginBottom: theme.spacing(2),\n        },\n        ladderItemFooter: {\n            textAlign: 'center',\n            marginTop: theme.spacing(2),\n        },\n        ladderItemBlock: {\n            position: 'relative',\n            backgroundColor: '#9e7662',\n            width: 10,\n            height: 32,\n            '&:first-child': {\n                borderTopLeftRadius: 3,\n                borderTopRightRadius: 3,\n            },\n            '&:last-child': {\n                borderBottomLeftRadius: 3,\n                borderBottomRightRadius: 3,\n            },\n        },\n        ladderItemHandle: {\n            cursor: 'pointer',\n            width: 12,\n            height: 12,\n            borderRadius: 2,\n            backgroundColor: '#795548',\n            '&:hover:not(.linked), &.active': {\n                zIndex: 1,\n                boxShadow: '0 0 8px 4px rgba(255, 255, 255, 0.4), 0 0 12px 12px rgb(158, 118, 98, 0.6)',\n            },\n            '&.linked': {\n                cursor: 'no-drop',\n            },\n        },\n        ladderMidLine: {\n            display: 'none',\n            position: 'absolute',\n            top: 0,\n            left: 0,\n            zIndex: 2,\n            backgroundColor: '#795548',\n            width: 8,\n            height: 8,\n            borderRadius: 4,\n            boxShadow: '0 2px 4px 2px rgba(0, 0, 0, 0.2)',\n            cursor: 'pointer',\n        },\n        result: {\n            display: 'none',\n            position: 'absolute',\n            zIndex: 999,\n            width: '100%',\n            height: '100%',\n            left: 0,\n            right: 0,\n            top: 0,\n            bottom: 0,\n            '&.active': {\n                display: 'block',\n            },\n            '& canvas': {\n                position: 'absolute',\n                left: 0,\n                right: 0,\n                top: 0,\n                bottom: 0,\n            },\n        },\n        buttons: {\n            marginTop: theme.spacing(6),\n            marginBottom: theme.spacing(4),\n        },\n        buttonItem: {\n            cursor: 'pointer',\n            '&:not(:disabled)': {\n                zIndex: 1000,\n            },\n        },\n    }))\n","export const CREATE_MAP_DATA = 'CREATE_MAP_DATA'\nexport const UPDATE_MAP_SIZE = 'UPDATE_MAP_SIZE'\nexport const START_GENERATING_MIDLINE = 'START_GENERATING_MIDLINE'\nexport const CANCEL_GENERATING_MIDLINE = 'CANCEL_GENERATING_MIDLINE'\nexport const FINISH_GENERATING_MIDLINE = 'FINISH_GENERATING_MIDLINE'\nexport const REMOVE_MIDLINE = 'REMOVE_MIDLINE'\nexport const PREPARE_GAME = 'PREPARE_GAME'\nexport const PLAY_GAME = 'PLAY_GAME'\nexport const RE_GAME = 'RE_GAME'\nexport const RESET = 'RESET'\n","import { State, MapData, MidLine } from '~/components/LadderGame.interface'\nimport * as types from '~/components/LadderGame.type'\n\nexport const defaultOption = {\n    mapMinHeight: 300,\n}\n\nexport const LadderGameInitialState: State = {\n    hasMapData: false,\n    mapData: [],\n    mapWidth: 0,\n    mapHeight: defaultOption.mapMinHeight,\n    ladderBlockCnt: 21,\n    midLineData: [],\n    generatingMidLinePoint: null,\n    gameStep: 0,\n    completedLineIndexs: [],\n    rewards: [],\n}\n\nexport const LadderGameInitializer = (state: State) => {\n    for (const key in state) {\n        Array.isArray(state[key]) && state[key].splice(0, state[key].length)\n    }\n    return state\n}\n\nlet __uid = 0\n\nexport const LadderGameReducer = (state: State, action: {type: string, payload?: any}) => {\n    switch (action.type) {\n        case types.CREATE_MAP_DATA: {\n            const ladderQty: number = action.payload.ladderQty\n\n\n            for (let x = 0; x < ladderQty; x++) {\n                state.mapData[x] = []\n                for (let y = 0; y < state.ladderBlockCnt; y++) {\n                    state.mapData[x][y] =  {\n                        uid: ++__uid,\n                        el: null,\n                        x,\n                        y,\n                        isHandle: false,\n                        isLinked: false,\n                        prevBlock: null,\n                        nextBlock: null,\n                        linkedBlock: null,\n                        midLine: null,\n                    }\n\n                    if (y > 0) {\n                        const prev = state.mapData[x][y - 1]\n                        prev.nextBlock = state.mapData[x][y]\n                        state.mapData[x][y].prevBlock = prev\n                    }\n\n                    if (y > 0 && y < state.ladderBlockCnt - 1) {\n                        state.mapData[x][y].isHandle = y % 2 !== 0\n                    }\n                }\n            }\n\n            if (Array.isArray(state.mapData)) {\n                state.mapData.splice(0, state.mapData.length, ...state.mapData)\n            }\n\n            return {\n                ...state,\n                hasMapData: state.mapData.length > 0,\n            }\n        }\n\n        case types.UPDATE_MAP_SIZE: {\n            const mapWidth = action.payload?.mapWidth ?? 0\n            const mapHeight = Math.max(state.mapHeight, action.payload?.mapHeight ?? 0)\n\n            return {\n                ...state,\n                mapWidth,\n                mapHeight,\n            }\n        }\n\n        case types.START_GENERATING_MIDLINE: {\n            const generatingMidLinePoint = action.payload.startPoint\n\n            return {\n                ...state,\n                generatingMidLinePoint,\n            }\n        }\n\n        case types.CANCEL_GENERATING_MIDLINE: {\n            return {\n                ...state,\n                generatingMidLinePoint: null,\n            }\n        }\n\n        case types.FINISH_GENERATING_MIDLINE: {\n            const startPoint: MapData | null = state.generatingMidLinePoint ?? null\n            const endPoint: MapData | null = action.payload.endPoint ?? null\n\n            const midLine: MidLine = {\n                uid: ++__uid,\n                el: null,\n                blocks: [],\n            }\n\n            if (startPoint && endPoint) {\n\n                // startPoint, endPoint 서로 연결\n                startPoint.isLinked = true\n                endPoint.isLinked = true\n                startPoint.linkedBlock = endPoint\n                endPoint.linkedBlock = startPoint\n                startPoint.midLine = midLine\n                endPoint.midLine = midLine\n                midLine.blocks = [startPoint, endPoint]\n\n                // state에 저장\n                state.midLineData.push(midLine)\n                state.generatingMidLinePoint = null\n            }\n\n            return {\n                ...state,\n            }\n        }\n\n        case types.REMOVE_MIDLINE: {\n            const midLineIndex = action.payload.midLineIndex\n\n            if (state.midLineData[midLineIndex]) {\n                state.midLineData[midLineIndex].blocks.forEach(row => {\n                    row.isLinked = false\n                    row.linkedBlock = null\n                    row.midLine = null\n                })\n                state.midLineData.splice(midLineIndex, 1)\n            }\n\n            return {\n                ...state,\n            }\n        }\n\n        case types.PREPARE_GAME: {\n            const rewards = action.payload.rewards\n\n            state.gameStep = 1\n            state.rewards = [...rewards].sort(() => Math.random() - Math.random())\n\n            return {\n                ...state,\n            }\n        }\n\n        case types.PLAY_GAME: {\n            const lineIndex = action.payload.lineIndex\n\n            state.completedLineIndexs.push(lineIndex)\n\n            if (state.completedLineIndexs.length === state.mapData.length) {\n                state.gameStep = 2\n            }\n\n            return {\n                ...state,\n            }\n        }\n\n        case types.RE_GAME: {\n            const prevMidLineData = state.midLineData.splice(0, state.midLineData.length)\n\n            state.generatingMidLinePoint = null\n            state.gameStep = 0\n            state.completedLineIndexs.splice(0, state.completedLineIndexs.length)\n\n            prevMidLineData.forEach(mapData => {\n                mapData.blocks.forEach(block => {\n                    block.isLinked = false\n                    block.linkedBlock = null\n                })\n            })\n\n            return {\n                ...state,\n            }\n        }\n\n        case types.RESET: {\n            state.hasMapData = false\n            state.mapData.splice(0, state.mapData.length)\n            state.mapWidth = 0\n            state.mapHeight = defaultOption.mapMinHeight\n            state.ladderBlockCnt = 21\n            state.midLineData.splice(0, state.midLineData.length)\n            state.generatingMidLinePoint = null\n            state.gameStep = 0\n            state.completedLineIndexs.splice(0, state.completedLineIndexs.length)\n\n            return {\n                ...state,\n            }\n        }\n\n        default: {\n            return state\n        }\n    }\n}\n\nexport default LadderGameReducer\n","import { MapData } from '~/components/LadderGame.interface'\nimport * as types from '~/components/LadderGame.type'\n\nexport const createMapData = (ladderQty: number) => {\n    return {\n        type: types.CREATE_MAP_DATA,\n        payload: { ladderQty },\n    }\n}\n\nexport const updateMapSize = (mapWidth?: number, mapHeight?: number) => {\n    return {\n        type: types.UPDATE_MAP_SIZE,\n        payload: { mapWidth, mapHeight },\n    }\n}\n\nexport const startGeneratingMidline = (startPoint: MapData) => {\n    return {\n        type: types.START_GENERATING_MIDLINE,\n        payload: { startPoint },\n    }\n}\n\nexport const cancelGeneratingMidline = () => {\n    return {\n        type: types.CANCEL_GENERATING_MIDLINE,\n        payload: {},\n    }\n}\n\nexport const finishGeneratingMidline = (endPoint: MapData) => {\n    return {\n        type: types.FINISH_GENERATING_MIDLINE,\n        payload: { endPoint },\n    }\n}\n\nexport const removeMidline = (midLineIndex: number) => {\n    return {\n        type: types.REMOVE_MIDLINE,\n        payload: { midLineIndex },\n    }\n}\n\nexport const prepareGame = (rewards: string[]) => {\n    return {\n        type: types.PREPARE_GAME,\n        payload: { rewards }\n    }\n\n}\n\nexport const playGame = (lineIndex: number) => {\n    return {\n        type: types.PLAY_GAME,\n        payload: { lineIndex },\n    }\n}\n\nexport const reGame = () => {\n    return {\n        type: types.RE_GAME,\n        payload: {},\n    }\n}\n\nexport const reset = () => {\n    return {\n        type: types.RESET,\n        payload: {},\n    }\n}\n","export const throttling = (cb: Function, distance = 100) => {\n    let prevTime = 0\n    let timeout = 0\n    return () => {\n        const nowTime = Date.now()\n        if (prevTime && nowTime - prevTime < distance) {\n            clearTimeout(timeout)\n            timeout = window.setTimeout(() => {\n                prevTime = nowTime\n                cb?.()\n            }, distance)\n        } else {\n            prevTime = nowTime\n            cb?.()\n        }\n    }\n}\n","import React, { useRef, useEffect, useState, useCallback } from 'react'\nimport { MapData } from '~/components/LadderGame.interface'\nimport { colors } from '~/components/LadderGame.style'\n\ninterface ResultCanvasProps {\n    lineIndex: number\n    width: number\n    height: number\n    map: MapData[][]\n}\n\ninterface ResultCanvasState {\n    coordinates: Waypoint[]\n    lineWidth: number\n    animations: AnimationCallback[]\n}\n\ntype Waypoint = [number, number]\ntype AnimationCallback = (isEnd: boolean) => void\n\nconst ResultCanvas: React.FC<ResultCanvasProps> = props => {\n    const canvasRef = useRef<HTMLCanvasElement>(null)\n    const [mounted, setMount] = useState(false)\n    const [state, setState] = useState<ResultCanvasState>(() => {\n        return {\n            coordinates: [],\n            lineWidth: 3,\n            animations: [],\n        }\n    })\n\n    useEffect(() => {\n        const { stopAnimation } = drawCanvas(true)\n        setMount(true)\n\n        return () => {\n            stopAnimation()\n        }\n    }, [])\n\n    useEffect(() => {\n        if (mounted) {\n            drawCanvas()\n        }\n    }, [props])\n\n    const drawCanvas = useCallback((isManual = false) => {\n        const coordinates = calcCoordinates()\n        const animations = makeAnimations(coordinates)\n\n        setState(prevState => ({\n            ...prevState,\n            animations,\n            coordinates,\n        }))\n\n        return playAnimation(animations, isManual)\n    }, [])\n\n    const calcCoordinates = useCallback(() => {\n        const coordinates: Waypoint[] = []\n        let prevBlockUid = 0\n        let current: MapData | null = props.map[props.lineIndex][0]\n\n        while (current !== null) {\n            let next: MapData | null = null\n            if (current.nextBlock) {\n                if (coordinates.length === 0) {\n                    // 시작\n                    coordinates.push([\n                        (current.el?.offsetLeft || 0) + (current.el?.offsetWidth || 0 - state.lineWidth) / 2,\n                        current.el?.offsetTop || 0,\n                    ])\n\n                    next = current.nextBlock\n                } else if (current.linkedBlock) {\n                    if (current.isHandle) {\n                        coordinates.push([\n                            (current.el?.offsetLeft || 0) + (current.el?.offsetWidth || 0 - state.lineWidth) / 2,\n                            (current.el?.offsetTop || 0) + (current.el?.offsetHeight || 0 - state.lineWidth) / 2,\n                        ])\n                    }\n\n                    if (current.linkedBlock.uid === prevBlockUid) {\n                        // midLine 이동 후\n                        next = current.nextBlock\n                    } else {\n                        // midLine 이동 전\n                        next = current.linkedBlock\n                    }\n                } else {\n                    // 일반 block\n                    next = current.nextBlock\n                }\n            } else {\n                // 끝\n                coordinates.push([\n                    (current.el?.offsetLeft || 0) + (current.el?.offsetWidth || 0 - state.lineWidth) / 2,\n                    (current.el?.offsetTop || 0) + (current.el?.offsetHeight || 0),\n                ])\n            }\n\n            prevBlockUid = current?.uid || 0\n            current = next\n        }\n\n        return coordinates\n    }, [props.map, props.lineIndex, state.lineWidth])\n\n    const makeAnimations = useCallback(\n        (coordinates = state.coordinates) => {\n            if (!canvasRef.current || !props.width || !props.height) return []\n\n            canvasRef.current.width = props.width\n            canvasRef.current.height = props.height\n\n            const canvas = canvasRef.current\n            const ctx = canvas.getContext('2d')\n            const color = colors[props.lineIndex % colors.length]\n\n            if (!ctx) return []\n\n            const lastIndex = coordinates.length - 1\n            const waypointMapper = (waypoint: Waypoint) => isEnd => {\n                ctx.lineTo(...waypoint)\n                isEnd && ctx.stroke()\n            }\n\n            ctx.lineWidth = state.lineWidth\n            ctx.lineCap = 'round'\n            ctx.lineJoin = 'round'\n            ctx.strokeStyle = color\n            ctx.fillStyle = color\n\n            const animations = coordinates.reduce((result: AnimationCallback[], currentCoordinate, index) => {\n                const prevCoordinate = coordinates[index - 1]\n\n                if (index === 0) {\n                    result.push(() => {\n                        ctx.clearRect(0, 0, canvas.width, canvas.height)\n                        ctx.beginPath()\n                        ctx.arc(currentCoordinate[0], currentCoordinate[1] - 8, 6, 0, Math.PI * 2)\n                        ctx.closePath()\n                        ctx.fill()\n                        ctx.beginPath()\n                    })\n\n                    result = result.concat(\n                        calcWaypoints([currentCoordinate[0], currentCoordinate[1] - 3], currentCoordinate).map(waypointMapper)\n                    )\n                }\n\n                if (prevCoordinate) {\n                    result = result.concat(calcWaypoints(prevCoordinate, currentCoordinate).map(waypointMapper))\n                }\n\n                if (index === lastIndex) {\n                    result = result.concat(\n                        calcWaypoints(currentCoordinate, [currentCoordinate[0], currentCoordinate[1] + 3]).map(waypointMapper)\n                    )\n                    result.push(() => {\n                        ctx.stroke()\n                        ctx.closePath()\n                        ctx.beginPath()\n                        ctx.arc(currentCoordinate[0], currentCoordinate[1] + 8, 6, 0, Math.PI * 2)\n                        ctx.closePath()\n                        ctx.fill()\n                    })\n                }\n\n                return result\n            }, [])\n\n            return animations\n        },\n        [props, state.coordinates, state.lineWidth]\n    )\n\n    const calcWaypoints = useCallback((start: number[], end: number[]) => {\n        const waypoints: Waypoint[] = []\n        const dx = end[0] - start[0]\n        const dy = end[1] - start[1]\n        const frames = Math.round(Math.sqrt(Math.pow(Math.abs(dx), 2) + Math.pow(Math.abs(dy), 2)) / 10)\n\n        for (let i = 0; i <= frames; i++) {\n            const x = start[0] + (dx * i) / frames\n            const y = start[1] + (dy * i) / frames\n\n            waypoints.push([x, y])\n        }\n\n        return waypoints\n    }, [])\n\n    const playAnimation = useCallback(\n        (animations: AnimationCallback[], useAnimation = false, playAnimationState = { playing: true, playIndex: 0 }) => {\n            for (const index in animations) {\n                const isEnd = useAnimation && playAnimationState.playIndex <= Number(index)\n                const animationCallback = animations[index]\n                animationCallback?.(isEnd)\n                if (isEnd) break\n            }\n\n            playAnimationState.playIndex++\n\n            if (playAnimationState.playing && useAnimation && playAnimationState.playIndex < animations.length) {\n                requestAnimationFrame(() => playAnimation(animations, useAnimation, playAnimationState))\n            }\n\n            return {\n                stopAnimation() {\n                    playAnimationState.playing = false\n                },\n            }\n        },\n        []\n    )\n\n    return <canvas ref={canvasRef} width={props.width} height={props.height} />\n}\n\nexport default ResultCanvas\n","import React, { useRef, useReducer, useCallback, useEffect } from 'react'\nimport clsx from 'clsx'\nimport { Typography, Box, Grid, Button } from '@material-ui/core'\nimport { InitialState } from '~/reducers/index.type'\nimport { MapData } from '~/components/LadderGame.interface'\nimport { useStyles } from '~/components/LadderGame.style'\nimport { LadderGameReducer, LadderGameInitialState, LadderGameInitializer } from '~/components/LadderGame.reducer'\nimport * as actions from '~/components/LadderGame.action'\nimport { throttling } from '~/lib/utils'\nimport ResultCanvas from '~/components/ResultCanvas'\n\n/*\nTODO:\n\n// 클릭=터치\n// block은 1:1로만 연결가능\n// block이 1:1로 연결되면 midLine이 생성됨.\n// midLine은 [prevStep ,nextStep] 데이터를 가지고 있어야됨. 좌표를 저장하는 방법은 2가지가 있음\n// - 1. useMemo를 사용하여 mapData가 변경될 때마다 새로 계산하는 방법\n// - 2. new Map()을 사용하여 변경할때마다 해당 hash만 변경하는 방법\n// 연결되면 isLinked가 true가 되고 더이상 클릭할 수 없음.\n// midLine을 취소할 수 있으며, 취소하면 원상복귀시켜야 됨.\n// 보상은 midLine이 다 그려진 뒤 게임이 시작되기전에 순서를 랜덤으로 섞어야됨\n// resultLine은 mapData의 0부터 시작해서 nextStep을 따라 그려져야됨\n// resultLine이 그려질 때 애니메이션 추가\n결과 데이터 저장\n확률 표시\n\n싱글모드, 멀티모드\n유저정보 입력\n호스트가 게임 생성\n다른 유저들이 게임에 참가\n\n*/\n\nconst LadderGame: React.FC<InitialState> = props => {\n    const [state, dispatch] = useReducer(LadderGameReducer, LadderGameInitialState, LadderGameInitializer)\n    const classes = useStyles(state)()\n\n    const mapRef = useRef<HTMLDivElement>(null)\n\n    const methods = {\n        calcMapSize() {\n            if (mapRef.current) {\n                dispatch(actions.updateMapSize(mapRef.current?.scrollWidth, mapRef.current?.scrollHeight))\n                return true\n            } else {\n                return false\n            }\n        },\n        paintLadder() {\n            const { ladderQty } = props\n\n            dispatch(actions.createMapData(ladderQty))\n        },\n        calcMidLineStyle: useCallback(\n            (startPoint: MapData, endPoint: MapData) => {\n                const toTheSameTop = (startPoint?.el?.offsetTop || 0) === (endPoint?.el?.offsetTop || 0)\n                const toTheBottom = (startPoint?.el?.offsetTop || 0) < (endPoint?.el?.offsetTop || 0)\n                const toTheRight = (startPoint?.el?.offsetLeft || 0) < (endPoint?.el?.offsetLeft || 0)\n\n                const leftPoint = toTheRight ? startPoint : endPoint\n                const rightPoint = toTheRight ? endPoint : startPoint\n\n                if (leftPoint?.el !== null && rightPoint?.el !== null) {\n                    const defaultMidLineOption = {\n                        width: 8,\n                    }\n                    const style = {\n                        display: 'block',\n                        top: 0,\n                        left: 0,\n                        width: defaultMidLineOption.width,\n                        height: defaultMidLineOption.width,\n                        transform: 'rotate(0deg)',\n                    }\n\n                    if (toTheSameTop) {\n                        const margin = (leftPoint.el.offsetWidth - defaultMidLineOption.width) / 2\n                        const addLine = leftPoint.el.offsetWidth - margin * 2\n                        style.width = Math.abs(leftPoint.el.offsetLeft - rightPoint.el.offsetLeft) + addLine\n                        style.left = leftPoint.el.offsetLeft + margin\n                        style.top = leftPoint.el.offsetTop + margin\n                    } else {\n                        const margin = (leftPoint.el.offsetWidth - defaultMidLineOption.width) / 2\n                        const addLine = leftPoint.el.offsetWidth - margin * 2\n                        const width = Math.abs(leftPoint.el.offsetLeft - rightPoint.el.offsetLeft) + addLine\n                        const height = Math.abs(leftPoint.el.offsetTop - rightPoint.el.offsetTop) + addLine\n                        const angle = (Math.atan(height / width) * 180) / Math.PI\n\n                        style.width = Math.sqrt(Math.pow(width, 2) + Math.pow(height, 2))\n                        style.left = leftPoint.el.offsetLeft - (style.width - width) / 2\n                        style.top = leftPoint.el.offsetTop + height / 2\n                        style.transform = `rotate(${angle}deg)`\n\n                        // 방향에 따라 추가 연산\n                        if ((!toTheBottom && toTheRight) || (!toTheRight && toTheBottom)) {\n                            style.top += height * -1\n                            style.transform = `rotate(${angle * -1}deg)`\n                        }\n                        if ((toTheBottom && toTheRight) || (!toTheBottom && !toTheRight)) {\n                            style.top -= defaultMidLineOption.width / 2\n                        }\n                        if ((!toTheBottom && toTheRight) || (toTheBottom && !toTheRight)) {\n                            style.top += defaultMidLineOption.width / 2\n                        }\n\n                        // margin 추가\n                        style.left += margin\n                        style.top += margin\n                    }\n\n                    return style\n                }\n                return undefined\n            },\n            [state.mapWidth, state.mapHeight]\n        ),\n        connectMidLine: (x: number, y: number) => e => {\n            e.persist()\n            console.group('item')\n            console.log('x', x, 'y', y)\n            console.log(state.mapData[x][y])\n            console.groupEnd()\n\n            // handle만 조작 가능하다\n            if (!state.mapData[x][y].isHandle) return\n\n            // 이미 연결된건 조작 불가능하다\n            if (state.mapData[x][y].isLinked) return\n\n            // 같은 block을 클릭하면 취소된다\n            if (state.mapData[x][y] === state.generatingMidLinePoint) {\n                dispatch(actions.cancelGeneratingMidline())\n                return\n            }\n\n            // 같은 라인의 block을 클릭하면 취소된다\n            if (x === state.generatingMidLinePoint?.x) {\n                dispatch(actions.cancelGeneratingMidline())\n                return\n            }\n\n            // midLine 시작점을 저장한다\n            if (!state.generatingMidLinePoint) {\n                dispatch(actions.startGeneratingMidline(state.mapData[x][y]))\n                return\n            }\n\n            // midLine을 그린다\n            if (state.generatingMidLinePoint) {\n                dispatch(actions.finishGeneratingMidline(state.mapData[x][y]))\n            }\n        },\n        cutMidLine: (midLineIndex: number) => () => {\n            dispatch(actions.removeMidline(midLineIndex))\n        },\n        bindEl: data => el => {\n            data.el = el\n        },\n        playGame: key => () => {\n            if (!state.completedLineIndexs.includes(key)) {\n                dispatch(actions.playGame(key))\n                return true\n            } else {\n                return false\n            }\n        },\n        doReady() {\n            dispatch(actions.prepareGame(props.rewards))\n        },\n        reGame() {\n            dispatch(actions.reGame())\n        },\n        handleWindowResize: throttling(() => {\n            methods.calcMapSize()\n        }),\n    }\n\n    useEffect(() => {\n        methods.paintLadder()\n        window.addEventListener('resize', methods.handleWindowResize)\n\n        return () => {\n            window.removeEventListener('resize', methods.handleWindowResize)\n        }\n    }, [])\n\n    useEffect(() => {\n        state.hasMapData && methods.calcMapSize()\n    }, [state.hasMapData])\n\n    return (\n        <div className={classes.root}>\n            {(() => {\n                if (!state.hasMapData) {\n                    return <Typography>사다리가 그려지는 중 입니다. 기다려주세요.</Typography>\n                } else if (state.hasMapData) {\n                    return (\n                        <React.Fragment>\n                            <div className={classes.ladders}>\n                                <Grid ref={mapRef} className={classes.ladderContainer} container spacing={2}>\n                                    {state.mapData.map((xVal, xIndex) => {\n                                        return (\n                                            <Grid key={xIndex} item>\n                                                <Box className={classes.ladderItemHeader}>\n                                                    <Button\n                                                        className={classes.buttonItem}\n                                                        variant=\"contained\"\n                                                        color=\"primary\"\n                                                        onClick={methods.playGame(xIndex)}\n                                                        disabled={state.gameStep === 0 || state.completedLineIndexs.includes(xIndex)}\n                                                    >\n                                                        {props.players[xIndex] || `참가자 ${xIndex + 1}`}\n                                                    </Button>\n                                                </Box>\n                                                <Box className={classes.ladderItem}>\n                                                    {xVal.map((yVal, yIndex) => {\n                                                        return (\n                                                            <div\n                                                                key={yIndex}\n                                                                ref={methods.bindEl(yVal)}\n                                                                className={clsx(classes.ladderItemBlock, {\n                                                                    [classes.ladderItemHandle]: yVal.isHandle,\n                                                                    active: state.generatingMidLinePoint === yVal,\n                                                                    linked: yVal.isLinked,\n                                                                })}\n                                                                onClick={methods.connectMidLine(xIndex, yIndex)}\n                                                            />\n                                                        )\n                                                    })}\n                                                </Box>\n                                                <Box className={classes.ladderItemFooter}>\n                                                    {state.gameStep === 0 && <Typography>보상 {xIndex + 1}</Typography>}\n                                                    {state.gameStep > 0 && (\n                                                        <Typography>{state.rewards[xIndex] || `보상 ${xIndex + 1}`}</Typography>\n                                                    )}\n                                                </Box>\n                                            </Grid>\n                                        )\n                                    })}\n                                    {state.midLineData.map((midLine, midLineIndex) => {\n                                        return (\n                                            <div\n                                                key={midLineIndex}\n                                                ref={methods.bindEl(midLine)}\n                                                className={classes.ladderMidLine}\n                                                style={methods.calcMidLineStyle(midLine.blocks[0], midLine.blocks[1])}\n                                                onClick={methods.cutMidLine(midLineIndex)}\n                                            />\n                                        )\n                                    })}\n                                    <div className={clsx(classes.result, { active: state.gameStep > 0 })}>\n                                        {state.completedLineIndexs.map((lineIndex, index) => {\n                                            return (\n                                                <ResultCanvas\n                                                    key={index}\n                                                    lineIndex={lineIndex}\n                                                    width={state.mapWidth}\n                                                    height={state.mapHeight}\n                                                    map={state.mapData}\n                                                />\n                                            )\n                                        })}\n                                    </div>\n                                </Grid>\n                            </div>\n\n                            <Grid container spacing={2} className={classes.buttons} justify=\"center\">\n                                <Grid item>\n                                    {state.gameStep === 0 && (\n                                        <Button\n                                            className={classes.buttonItem}\n                                            variant=\"contained\"\n                                            color=\"secondary\"\n                                            size=\"large\"\n                                            onClick={methods.doReady}\n                                        >\n                                            준비 완료\n                                        </Button>\n                                    )}\n                                    {state.gameStep > 0 && (\n                                        <Button\n                                            className={classes.buttonItem}\n                                            variant=\"contained\"\n                                            color=\"secondary\"\n                                            size=\"large\"\n                                            onClick={methods.reGame}\n                                        >\n                                            다시하기\n                                        </Button>\n                                    )}\n                                </Grid>\n                            </Grid>\n                        </React.Fragment>\n                    )\n                }\n            })()}\n        </div>\n    )\n}\n\nexport default LadderGame\n","import React, { useState, useReducer, useEffect, useRef } from 'react'\nimport { NextPage } from 'next'\nimport Typography from '@material-ui/core/Typography'\nimport Stepper from '@material-ui/core/Stepper'\nimport Step from '@material-ui/core/Step'\nimport StepLabel from '@material-ui/core/StepLabel'\nimport StepContent from '@material-ui/core/StepContent'\nimport DefaultLayout from '~/layouts/DefaultLayout'\nimport Button from '@material-ui/core/Button'\nimport Paper from '@material-ui/core/Paper'\nimport TextField from '@material-ui/core/TextField'\nimport Box from '@material-ui/core/Box'\nimport { makeStyles } from '@material-ui/core'\nimport IndexReducer, { initialState } from '~/reducers/index.reducer'\nimport * as IndexAction from '~/reducers/index.action'\nimport LadderGame from '~/components/LadderGame'\n\nexport const useStyles = makeStyles(theme => ({\n    root: {\n        width: '100%',\n    },\n    textField: {\n        marginRight: theme.spacing(1),\n        '&:last-child': {\n            marginRight: theme.spacing(0),\n        },\n    },\n    button: {\n        marginTop: theme.spacing(1),\n        marginRight: theme.spacing(1),\n        '&:last-child': {\n            marginRight: theme.spacing(0),\n        },\n    },\n    actionsContainer: {\n        marginBottom: theme.spacing(2),\n    },\n    resetContainer: {\n        padding: theme.spacing(3),\n    },\n}))\n\nconst IndexPage: NextPage = () => {\n    const classes = useStyles()\n    const steps = ['몇 개의 사다리가 필요하신가요?', '이름을 입력해주세요.', '보상을 입력해주세요.']\n    const [activeStep, setActiveStep] = useState(0)\n    const [store, dispatch] = useReducer(IndexReducer, initialState)\n    const formRef = useRef<HTMLFormElement>(null)\n\n    const handleSubmit = e => {\n        e.preventDefault()\n    }\n\n    const handleNext = () => {\n        setActiveStep(prevActiveStep => prevActiveStep + 1)\n    }\n\n    const handleBack = () => {\n        setActiveStep(prevActiveStep => prevActiveStep - 1)\n    }\n\n    const handleReset = () => {\n        setActiveStep(0)\n        dispatch(IndexAction.resetAll())\n        formRef.current?.reset()\n    }\n\n    const changeLadderQty = e => {\n        if (Number(e?.target?.value) > 20) e.target.value = 20\n        dispatch(IndexAction.changeLadderQty(Number(e?.target?.value)))\n    }\n\n    const changeName = index => e => {\n        dispatch(IndexAction.changeName(index, e?.target?.value))\n    }\n\n    const changeReward = index => e => {\n        dispatch(IndexAction.changeReward(index, e?.target?.value))\n    }\n\n    useEffect(() => {\n        console.log(store)\n    }, [store])\n\n    return (\n        <DefaultLayout>\n            <Typography component=\"h1\" variant=\"h4\" align=\"center\">\n                👋 안녕하세요!\n            </Typography>\n\n            <form ref={formRef} className={classes.root} noValidate autoComplete=\"off\" onSubmit={handleSubmit}>\n                <Stepper activeStep={activeStep} orientation=\"vertical\">\n                    {steps.map((label, currentStep) => {\n                        let isError = false\n\n                        return (\n                            <Step key={label}>\n                                <StepLabel>{label}</StepLabel>\n                                <StepContent>\n                                    {(() => {\n                                        switch (currentStep) {\n                                            case 0: {\n                                                isError = !store.ladderQty || store.ladderQty <= 1 || store.ladderQty > 20\n                                                return (\n                                                    <TextField\n                                                        className={classes.textField}\n                                                        type=\"number\"\n                                                        label={isError ? '숫자 2이상 20이하' : ''}\n                                                        error={isError}\n                                                        onChange={changeLadderQty}\n                                                        defaultValue={(!isError && store.ladderQty) || ''}\n                                                    />\n                                                )\n                                            }\n\n                                            case 1: {\n                                                return (\n                                                    <React.Fragment>\n                                                        {Array.from({ length: store.ladderQty }).map((row, key) => {\n                                                            return (\n                                                                <TextField\n                                                                    key={key}\n                                                                    className={classes.textField}\n                                                                    onChange={changeName(key)}\n                                                                    defaultValue={store.players[key] || ''}\n                                                                />\n                                                            )\n                                                        })}\n                                                    </React.Fragment>\n                                                )\n                                            }\n\n                                            case 2: {\n                                                return (\n                                                    <React.Fragment>\n                                                        {Array.from({ length: store.ladderQty }).map((row, key) => {\n                                                            return (\n                                                                <TextField\n                                                                    key={key}\n                                                                    className={classes.textField}\n                                                                    onChange={changeReward(key)}\n                                                                    defaultValue={store.rewards[key] || ''}\n                                                                />\n                                                            )\n                                                        })}\n                                                    </React.Fragment>\n                                                )\n                                            }\n\n                                            default:\n                                                return null\n                                        }\n                                    })()}\n\n                                    <Box className={classes.actionsContainer}>\n                                        <Box>\n                                            <Button disabled={currentStep === 0} onClick={handleBack} className={classes.button}>\n                                                Back\n                                            </Button>\n                                            <Button\n                                                variant=\"contained\"\n                                                color=\"primary\"\n                                                onClick={handleNext}\n                                                className={classes.button}\n                                                disabled={isError}\n                                            >\n                                                Next\n                                            </Button>\n                                        </Box>\n                                    </Box>\n                                </StepContent>\n                            </Step>\n                        )\n                    })}\n                </Stepper>\n            </form>\n\n            {activeStep === steps.length && (\n                <Paper square elevation={0} className={classes.resetContainer}>\n                    <Box>\n                        <LadderGame {...store} />\n                    </Box>\n                    <Box>\n                        <Button disabled={activeStep === 0} onClick={handleBack} className={classes.button}>\n                            Back\n                        </Button>\n                        <Button onClick={handleReset} className={classes.button}>\n                            Reset\n                        </Button>\n                    </Box>\n                </Paper>\n            )}\n        </DefaultLayout>\n    )\n}\n\nexport default IndexPage\n","module.exports = require(\"@material-ui/core/styles\");","module.exports = require(\"@material-ui/core/StepLabel\");","module.exports = require(\"@material-ui/core/TextField\");","module.exports = require(\"@material-ui/core\");","module.exports = require(\"@material-ui/core/Step\");","module.exports = require(\"@material-ui/core/Typography\");","module.exports = require(\"@material-ui/core/Stepper\");","module.exports = require(\"@material-ui/core/Button\");","module.exports = require(\"@material-ui/core/Box\");","module.exports = require(\"react\");","module.exports = require(\"clsx\");","module.exports = require(\"@material-ui/core/StepContent\");","module.exports = require(\"@material-ui/core/Paper\");","module.exports = require(\"next/head\");"],"sourceRoot":""}